---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from "astro:content";
// const allPosts = await Astro.glob('../../pages/blog/*.md');
const allPosts = await getCollection("blog");
// astro.glob => getCollection is the difference between getting all files from a directory in pages vs. collections
// https://docs.astro.build/en/tutorials/add-content-collections/
---

<Layout title="Welcome to Prince Collection" description="About Prince Collection">
		<div class="container-fluid px-0">
			<div class="row min-vh-100">
				<div class="col-lg-12 d-flex flex-column justify-content-center align-items-start text-start p-5 min-vh-50">
					<h1 class="display-4 fw-bold lh-1 mb-3 mt-3">Prince Collection Blog</h1>
				</div>
				<div class="col-lg-12 p-0" style="height: 50vh">
					<img class="w-100 h-100 rounded-4" style="object-fit: cover" src="https://images.unsplash.com/photo-1469796466635-455ede028aca?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
				</div>
			</div>
            <div class="row row-cols-1 row-cols-lg-4 g-3 p-4">
            
                {
                    allPosts.map((post) => (
                    <div class="col">
                        <div class="card rounded-5 p-3">
                            <img src={post.data.imageUrl} class="card-img-top rounded-5" style="width: 100%; height: 250px; object-fit: cover" alt="...">
                            <div class="card-body p-4">
                                <h5 class="card-title">{post.data.title}</h5>
                                <p class="card-text">{post.data.description}</p>
                                <p>{post.data.pubDate.toString().slice(0,10)}</p>

                                <a href={`/blog/${post.slug}/`}>
                                    <button class="btn btn-pc px-4 rounded-4">Read more</button>
                                </a>
                            </div>
                        </div>
                    </div>
                    ))
                }
            </div>
        </div>
        </Layout>

